<!DOCTYPE html>
<html lang="kor" xmlns:th="http://www.thymeleaf.org">

<div th:replace= "~{usr/include/head :: head}"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

  <style>
	.garo {
		max-width: 1000px;  /* ì˜ˆ: ìµœëŒ€ ë„ˆë¹„ë¥¼ 1200pxë¡œ ì„¤ì • */
		margin: 0 auto;  /* ì¤‘ì•™ ì •ë ¬ */
	}
  
    body {
      font-family: sans-serif;
    }

    .search-box {
      display: flex;
      align-items: center;
      background-color: white;
      border-radius: 40px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 10px 20px;
      width: fit-content;
      gap: 30px;
    }

    .search-item {
      display: flex;
      flex-direction: column;
      font-size: 14px;
    }

    .search-item-title {
      color: #888;
      font-size: 12px;
      margin-bottom: 2px;
    }

    .search-item-value {
      font-weight: bold;
    }

    .divider {
      width: 1px;
      height: 30px;
      background-color: #ddd;
    }

    input[type="text"] {
      border: none;
      outline: none;
      font-size: 14px;
    }
    
    .checkin-item,
	.checkout-item {
	  flex-grow: 1;
	  min-width: 170px; /* ì„ íƒ ì‚¬í•­: ìµœì†Œ ë„ˆë¹„ ë³´ì¥ */
	}

  </style>


	<!--Breadcrumb start-->
	<div class="container">
		<div class="row">
<!-- 			<div class="col-12 py-4"> -->
<!-- 				<nav aria-label="breadcrumb"> -->
<!-- 					<ol class="breadcrumb mb-0"> -->
<!-- 						<li class="breadcrumb-item"><a href="#!">Home</a></li> -->
<!-- 						<li class="breadcrumb-item"><a href="#!">Shop</a></li> -->
<!-- 						<li class="breadcrumb-item"><a href="#!">Shopping Cart</a></li> -->
<!-- 						<li class="breadcrumb-item active" aria-current="page">Checkout</li> -->
<!-- 					</ol> -->
<!-- 				</nav> -->
<!-- 			</div> -->
			<div class="col-12">
				<!--Heading-->
				<div class="my-5 garo">
					<h1 class="mb-0">ì˜ˆì•½/ê²°ì œ</h1>
				</div>
			</div>
		</div>
	</div>
	<!--Breadcrumb end-->
	<!--Shopping checkout start-->
	<section class="pt-lg-4 pb-lg-8">
		<div class="container garo">
			<div class="row gx-lg-6 gy-4 gy-lg-0">
				<!--Shopping checkout detail-->
				<div class="col-lg-8">
					<div class="">
						<div class="d-flex justify-content-center align-items-center mb-2">
<!-- <div class="search-box"> -->
<!--   <div class="search-item"> -->
<!--     <div class="search-item-title">ì—¬í–‰ì§€</div> -->
<!--     <input type="text" placeholder="ìë™ì…ë ¥" disabled> -->
<!--   </div> -->

  <div class="divider"></div>

  <div class="search-item">
<!--     <div class="search-item-title">ì²´í¬ì¸ & ì²´í¬ì•„ì›ƒ</div> -->
    <!-- ë‹¬ë ¥ ìœ„ì¹˜ ì—¬ê¸° -->
    <div id="calendar"></div>
    <!-- ê°’ ì„œë²„ë¡œ ë„˜ê¸¸ ê±°ë©´ hidden input ìœ ì§€ -->
    <input type="hidden" id="checkin">
    <input type="hidden" id="checkout">
  </div>
<!-- </div> -->

						</div>

					</div>
				</div>
				<div class="col-lg-4">
<!-- 					<div class="mb-4"> -->
<!-- 						<div class="alert alert-success small">Congratulations ğŸ‰ You are eligible for free shipping. -->
<!-- 						</div> -->
<!-- 					</div> -->
					<!--Order summary-->
					<div class="card bg-light bg-opacity-25 mb-4">
						<div class="card-header px-4 py-3">
							<h3 class="fs-5 mb-0">ì£¼ë¬¸ ìš”ì•½</h3>
						</div>
						<div class="card-body px-4">
							<div class="d-flex justify-content-between mb-4">
								<div class="d-flex align-items-start gap-3 flex-wrap">
									<a href="#!"><img th:src="@{${item.image}}" 
											alt="product image" class="border" width="60" /></a>
											<!-- ì—¬í–‰ì§€ëŠ” ì´ë¯¸ì§€ê°€ ì—†ì–´ì„œ ì‚¬ì´íŠ¸ê°€ ì•ˆì—´ë¦¼ -->

									<div class="mb-2">
										<h3 class="fs-6 mb-1 text-link">
										  <a th:if="${type == 'restaurant'}"
										     th:text="${title}"
										     th:href="'/bada/restaurant/' + ${item.restaurantId}"></a>
										
										  <a th:if="${type == 'accom'}"
										     th:text="${title}"
										     th:href="'/bada/accom/' + ${item.accomId}"></a>
										     
										  <a th:if="${type == 'sea'}"
										  	 th:text="${title}"
										  	 th:href="'/bada/sea/' + ${item.sea_id}"></a>
										</h3>

<!-- 										<p class="mb-2 text-dark">Black</p> -->
									</div>
								</div>
								<div>
									<span class="text-dark">$78</span>
								</div>
							</div>
<div class="mb-2 border-top pt-3 mb-2">
  <div class="d-flex align-items-center justify-content-between mb-2">
    <span><b>ì²´í¬ì¸</b></span>
    <span id="selected-checkin">-</span>
  </div>
  <div class="d-flex align-items-center justify-content-between mb-2">
    <span><b>ì²´í¬ì•„ì›ƒ</b></span>
    <span id="selected-checkout">-</span>
  </div>
							<div
								class="d-flex align-items-center justify-content-between border-top pt-3 mb-2 fw-medium text-dark">
								<span class="">ì´ ê¸ˆì•¡ : </span>
								<span class="">$78.00 USD</span>
							</div>

						    <!-- ê²°ì œí•˜ê¸° ë²„íŠ¼ -->
    						<button class="button btn btn-primary" style="margin-top: 30px" onclick="requestPayment()">ê²°ì œí•˜ê¸°</button>
  
  
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

<script src="https://js.tosspayments.com/v2/standard"></script>

      <script>
      // ------  SDK ì´ˆê¸°í™” ------
      // @docs https://docs.tosspayments.com/sdk/v2/js#í† ìŠ¤í˜ì´ë¨¼ì¸ -ì´ˆê¸°í™”
      const clientKey = "test_ck_nRQoOaPz8Lxz2KndYGEe8y47BMw6";
      const customerKey = "haiwcxeVmfIN3FzlmAmV7";
      const tossPayments = TossPayments(clientKey);
      // íšŒì› ê²°ì œ
      // @docs https://docs.tosspayments.com/sdk/v2/js#tosspaymentspayment
      const payment = tossPayments.payment({ customerKey });
      // ë¹„íšŒì› ê²°ì œ
      // const payment = tossPayments.payment({customerKey: TossPayments.ANONYMOUS})

      // ------ 'ê²°ì œí•˜ê¸°' ë²„íŠ¼ ëˆ„ë¥´ë©´ ê²°ì œì°½ ë„ìš°ê¸° ------
      // @docs https://docs.tosspayments.com/sdk/v2/js#paymentrequestpayment
      async function requestPayment() {
        // ê²°ì œë¥¼ ìš”ì²­í•˜ê¸° ì „ì— orderId, amountë¥¼ ì„œë²„ì— ì €ì¥í•˜ì„¸ìš”.
        // ê²°ì œ ê³¼ì •ì—ì„œ ì•…ì˜ì ìœ¼ë¡œ ê²°ì œ ê¸ˆì•¡ì´ ë°”ë€ŒëŠ” ê²ƒì„ í™•ì¸í•˜ëŠ” ìš©ë„ì…ë‹ˆë‹¤.
        await payment.requestPayment({
          method: "CARD", // ì¹´ë“œ ê²°ì œ
          amount: {
            currency: "KRW",
            value: 1,
          },
          orderId: "n1CJ-fTjD3R4SkDDHoa8s", // ê³ ìœ  ì£¼ë¬¸ë²ˆí˜¸
          orderName: "í† ìŠ¤ í‹°ì…”ì¸  ì™¸ 2ê±´",
          successUrl: window.location.origin + "/success", // ê²°ì œ ìš”ì²­ì´ ì„±ê³µí•˜ë©´ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ëŠ” URL
          failUrl: window.location.origin + "/fail", // ê²°ì œ ìš”ì²­ì´ ì‹¤íŒ¨í•˜ë©´ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ëŠ” URL
          customerEmail: "customer123@gmail.com",
          customerName: "ê¹€í† ìŠ¤",
          customerMobilePhone: "01012341234",
          // ì¹´ë“œ ê²°ì œì— í•„ìš”í•œ ì •ë³´
          card: {
            useEscrow: false,
            flowMode: "DEFAULT", // í†µí•©ê²°ì œì°½ ì—¬ëŠ” ì˜µì…˜
            useCardPoint: false,
            useAppCardOnly: false,
          },
        });
      }
    </script>



	<!--Shopping checkout end-->
	<!-- jQuery -->
	<script src="/usr/js/jquery-3.7.1.min.js"></script>
	<!-- Flatpickr -->
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<!-- Flatpickr í•œêµ­ì–´ ë²ˆì—­ -->
	<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
		
	<script type="text/javascript">
	
	// ë‹¬ë ¥
	$(function () {
		  const reservedRanges = [
		    { from: "2025-05-01", to: "2025-05-07" },
		    { from: "2025-05-15", to: "2025-05-17" }
		  ];

		  const calendar = flatpickr("#calendar", {
		    inline: true,
		    mode: "range",
		    dateFormat: "Y-m-d",
		    minDate: "today",
		    locale: "ko",
		    disable: reservedRanges,
		    showMonths: 2,  // ğŸ“Œ ì—¬ê¸° ì¶”ê°€!
		    onChange: function(selectedDates) {
		      if (selectedDates.length === 2) {
		        $('#checkin').val(flatpickr.formatDate(selectedDates[0], "Y-m-d"));
		        $('#checkout').val(flatpickr.formatDate(selectedDates[1], "Y-m-d"));

		        $('#selected-checkin').text(flatpickr.formatDate(selectedDates[0], "Y-m-d"));
		        $('#selected-checkout').text(flatpickr.formatDate(selectedDates[1], "Y-m-d"));
		      }
		    }
		  });
		});

	</script>
    

<div th:replace= "~{usr/include/footer :: footer}"></div>
</html>